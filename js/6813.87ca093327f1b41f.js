"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6813],{16813:function(e,t,n){n.r(t),n.d(t,{getServerSideProps:function(){return v}});var a=n(50029),o=n(87794),r=n.n(o),s=n(67294),l=n(63282),c=n(32670),i=(n(38973),n(15034)),u=n(23838),d=n(11163),m=n(9669),p=n.n(m),h=n(85893),f="https://learn.maxima.school/";function v(e){return _.apply(this,arguments)}function _(){return(_=(0,a.Z)(r().mark((function e(t){var n,a;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.req,a=n.headers["x-real-ip"]||n.connection.remoteAddress,e.abrupt("return",{props:{ip:a}});case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}t.default=function(e){var t=e.modal,n=e.titleForForm,o=void 0===n?"":n,m=(0,u.Z)("form"),v=t.showFormModal?"modal modal-active":"modal modal-disable",_=(0,s.useState)(!1),b=_[0],x=_[1],j=(0,s.useState)(""),y=j[0],g=j[1],k=(0,s.useState)(""),S=(k[0],k[1],(0,s.useState)("")),N=S[0],w=S[1],C=(0,s.useState)(""),I=C[0],P=(C[1],(0,s.useState)("Telegram")),q=P[0],E=P[1],F=(0,s.useState)(!0),T=F[0],Z=F[1],G=(0,s.useState)(""),L=G[0],A=G[1],M=(0,s.useState)(!1),O=M[0],R=(M[1],(0,s.useState)([])),U=(R[0],R[1]),J=(0,s.useState)([]),K=(J[0],J[1],(0,d.useRouter)()),V=(0,s.useState)({title:""}),W=V[0],B=V[1],D=(0,s.useState)({location:""}),X=D[0],Y=D[1];(0,s.useEffect)((function(){(0,l.ZP)("getClientID",(function(e){return A(e)}))}),[]);var $=function(){var e=(0,a.Z)(r().mark((function e(){var n,a,s;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={method:"GET",redirect:"follow"},e.next=3,fetch("https://json.geoiplookup.io/",n).then((function(e){return e.json()})).then((function(e){return e.ip}));case 3:return a=e.sent,y&&N&&q&&(s=[{source_name:X.location.pathname,source_uid:"a1fee7c0fc436088e64ba2e8822ba2b3",pipeline_id:4035451,_embedded:{leads:[{name:o||W.title,visitor_uid:"5692210d-58d0-468c-acb2-dce7f93eef87",custom_fields_values:[{field_id:956603,values:[{value:q}]},,{field_id:958873,values:[{value:L}]},{field_id:958471,values:[{value:a}]}],_embedded:{tags:[{name:"\u0417\u0430\u044f\u0432\u043a\u0430 \u0441 \u0441\u0430\u0439\u0442\u0430"}]}}],contacts:[{name:y,custom_fields_values:[{field_id:731805,values:[{value:N}]},{field_id:731807,values:[{value:I}]},{field_id:880119,values:[{value:!0}]}]}],companies:[{}]},metadata:{form_id:"a1fee7c0fc436088e64ba2e8822ba2b3ewrw",form_sent_at:0,form_name:W.title,form_page:"\u0417\u0430\u044f\u0432\u043a\u0430 \u0441 \u0441\u0430\u0439\u0442\u0430 ".concat(X.location.pathname)}}],new URL(X.location.href).searchParams.forEach((function(e,t){s[0]._embedded.leads[0].custom_fields_values.push({field_id:c.T.find((function(e){return e.name===t})).id,values:[{value:e}]})})),x(!0),fetch("/api/amo",{method:"POST",body:JSON.stringify(s),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){"/fnd_promo"===window.location.pathname&&fetch("/api/amo/accept",{method:"POST",body:JSON.stringify({uid:e._embedded.unsorted[0].uid,status:42984433}),headers:{"Content-Type":"application/json"}}),x(!1),K.push("/thanks"),document.body.classList.toggle("overflowCheck"),t.setShowFormModal(!1)})).catch((function(e){return console.log("error",e)})),(0,l.ZP)("reachGoal","send-choice"),(0,l.ZP)("reachGoal","registratcia"),(0,l.ZP)("reachGoal","send_form"),m("event","form",{event_category:"event",event_label:"send_form"}),m("send_form"),m("send-choice")),e.abrupt("return");case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,s.useEffect)((function(){y&&N&&q&&/^(\+{0,})(\d{0,})([(]{1}\d{1,3}[)]{0,}){0,}(\s?\d+|\+\d{2,3}\s{1}\d+|\d+){1}[\s|-]?\d+([\s|-]?\d+){1,2}(\s){0,}$/gm.test(N)&&(null===N||void 0===N?void 0:N.length)>10&&(null===N||void 0===N?void 0:N.length)<14?Z(!1):Z(!0),document.querySelector('.checkbox-container input[type="checkbox"]').checked=!0,document.querySelectorAll('input[name="messenger"]').forEach((function(e){e.value===q&&(e.checked=!0)})),Y(window),B(document),p().get(f+"/trial-courses/by-partner/4").then((function(e){return U(e.data.data)}))}),[X,W,y,N]),(0,h.jsx)("div",{className:v,onClick:function(e){e.target.classList.contains("modal-active")&&(t.setShowFormModal(!1),document.body.classList.remove("overflowCheck"))},children:(0,h.jsxs)("div",{className:"modal__body modal__form",children:[(0,h.jsxs)("div",{className:"modal__form__wrp",children:[(0,h.jsx)("img",{src:"/images/Frame.webp",alt:"",className:"form__img"}),O?(0,h.jsxs)("div",{className:"form__success",children:[(0,h.jsx)("img",{src:"/success.svg",alt:"\u0421\u043f\u0430\u0441\u0438\u0431\u043e! \u0412\u0430\u0448\u0430 \u0437\u0430\u044f\u0432\u043a\u0430 \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0430"}),(0,h.jsx)("h3",{children:"\u0421\u043f\u0430\u0441\u0438\u0431\u043e! \u0412\u0430\u0448\u0430 \u0437\u0430\u044f\u0432\u043a\u0430 \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0430."})]}):(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("input",{type:"text",className:"form__input",placeholder:"\u0418\u043c\u044f \u0424\u0430\u043c\u0438\u043b\u0438\u044f",value:y,onInput:function(e){return g(e.target.value)}}),(0,h.jsxs)("label",{htmlFor:"phoneInput",style:{width:"100%"},children:[(0,h.jsx)("span",{className:"visually-hidden",children:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d"}),(0,h.jsx)(i.ZP,{international:!0,countryCallingCodeEditable:!1,defaultCountry:"RU",value:N,onChange:w,countries:["RU","BY","KG","KZ"]})]}),(0,h.jsxs)("div",{className:"social",children:[(0,h.jsx)("h3",{children:"\u041a\u0430\u043a\u0438\u043c \u043c\u0435\u0441\u0435\u043d\u0434\u0436\u0435\u0440\u043e\u043c \u0432\u044b \u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0435\u0441\u044c?"}),(0,h.jsxs)("label",{className:"radio-container",children:["Telegram",(0,h.jsx)("input",{type:"radio",value:"Telegram",name:"messenger",onInput:function(e){return E(e.target.value)}}),(0,h.jsx)("span",{className:"radio-checkmark"})]}),(0,h.jsxs)("label",{className:"radio-container",children:["WhatsApp",(0,h.jsx)("input",{type:"radio",value:"WhatsApp",name:"messenger",onInput:function(e){return E(e.target.value)}}),(0,h.jsx)("span",{className:"radio-checkmark"})]}),(0,h.jsxs)("label",{className:"radio-container",children:["Viber",(0,h.jsx)("input",{type:"radio",value:"Viber",name:"messenger",onInput:function(e){return E(e.target.value)}}),(0,h.jsx)("span",{className:"radio-checkmark"})]}),(0,h.jsxs)("label",{className:"radio-container",children:["\u041d\u0435 \u043f\u043e\u043b\u044c\u0437\u0443\u044e\u0441\u044c",(0,h.jsx)("input",{type:"radio",value:"\u041d\u0435 \u043f\u043e\u043b\u044c\u0437\u0443\u044e\u0441\u044c",name:"messenger",onInput:function(e){return E(e.target.value)}}),(0,h.jsx)("span",{className:"radio-checkmark"})]})]}),(0,h.jsxs)("label",{className:"checkbox-container",children:[(0,h.jsx)("input",{type:"checkbox"}),(0,h.jsx)("span",{className:"checkmark"}),"\u042f \u0441\u043e\u0433\u043b\u0430\u0441\u0435\u043d \u043d\u0430 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0443 \u043c\u043e\u0438\u0445",(0,h.jsx)("a",{target:"_blank",rel:"noreferrer",href:"/politika_obrabotki_personalnyh_dannyh_16_10_2021.pdf",children:" \u043f\u0435\u0440\u0441\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0445 \u0434\u0430\u043d\u043d\u044b\u0445"})]}),(0,h.jsx)("button",{className:"form__btn",onClick:function(){var e,t;(document.querySelector(".form__input").style.borderColor="#583E90",document.querySelector(".PhoneInputInput").style.borderColor="#583E90",T)?(document.querySelector(".form__input").value?document.querySelector(".PhoneInputInput").style.borderColor="red":document.querySelector(".form__input").style.borderColor="red",((null===(e=document.querySelector(".PhoneInputInput").value.split(" ").join(""))||void 0===e?void 0:e.length)<11||(null===(t=document.querySelector(".PhoneInputInput").value.split(" ").join(""))||void 0===t?void 0:t.length)>13)&&(document.querySelector(".PhoneInputInput").style.borderColor="red")):$()},children:b?(0,h.jsxs)("div",{className:"lds-ellipsis",children:[(0,h.jsx)("div",{}),(0,h.jsx)("div",{}),(0,h.jsx)("div",{}),(0,h.jsx)("div",{})]}):(0,h.jsx)(h.Fragment,{children:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c"})})]})]}),(0,h.jsx)("div",{className:"modal-form-close-section",onClick:function(){document.body.classList.remove("overflowCheck"),t.setShowFormModal(!1)},children:"X"})]})})}}}]);