(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6616],{76616:function(e,n,a){"use strict";a.r(n);var t=a(50029),s=a(87794),r=a.n(s),l=a(67294),o=a(63282),i=a(32670),c=a(4298),u=a.n(c),d=(a(38973),a(15034)),m=a(23838),p=a(11163),h=a(85893);n.default=function(e){var n=e.text,a=e.body,s=void 0===a?null:a,c=(e.closeQuiz,e.classNames),_=(0,m.Z)("form"),f=(0,l.useState)(!1),v=f[0],x=f[1],j=(0,l.useState)(""),g=j[0],b=j[1],k=(0,l.useState)(""),y=k[0],N=k[1],S=(0,l.useState)(""),I=S[0],q=(S[1],(0,l.useState)("Telegram")),F=q[0],C=q[1],w=(0,l.useState)(!0),P=w[0],E=w[1],T=(0,l.useState)(!1),Z=T[0],z=(T[1],(0,l.useState)("")),A=z[0],G=z[1],V=(0,p.useRouter)(),W=(0,l.useState)({title:""}),K=W[0],R=W[1];(0,l.useEffect)((function(){(0,o.ZP)("getClientID",(function(e){return G(e)}))}),[]);var U=(0,l.useState)({location:""}),B=U[0],O=U[1],D=function(){var e=(0,t.Z)(r().mark((function e(){var n,a,t;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={method:"GET",redirect:"follow"},e.next=3,fetch("https://json.geoiplookup.io/",n).then((function(e){return e.json()})).then((function(e){return e.ip}));case 3:return a=e.sent,g&&y&&F&&(t=[{source_name:B.location.pathname,source_uid:"a1fee7c0fc436088e64ba2e8822ba2b3",pipeline_id:4035451,_embedded:{leads:[{name:K.title,visitor_uid:"5692210d-58d0-468c-acb2-dce7f93eef87",custom_fields_values:[{field_id:956603,values:[{value:F}]},{field_id:958873,values:[{value:A}]},{field_id:957527,values:[{value:s||""}]},{field_id:958471,values:[{value:a}]}],_embedded:{tags:[{name:"\u0417\u0430\u044f\u0432\u043a\u0430 \u0441 \u0441\u0430\u0439\u0442\u0430"}]}}],contacts:[{name:g,custom_fields_values:[{field_id:731805,values:[{value:y}]},{field_id:731807,values:[{value:I}]},{field_id:880119,values:[{value:!0}]}]}],companies:[{}]},metadata:{form_id:"a1fee7c0fc436088e64ba2e8822ba2b3ewrw",form_sent_at:0,form_name:K.title,form_page:"\u0417\u0430\u044f\u0432\u043a\u0430 \u0441 \u0441\u0430\u0439\u0442\u0430 ".concat(B.location.pathname)}}],new URL(B.location.href).searchParams.forEach((function(e,n){t[0]._embedded.leads[0].custom_fields_values.push({field_id:i.T.find((function(e){return e.name===n})).id,values:[{value:e}]})})),x(!0),fetch("/api/amo",{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}}).then((function(e){return e.text()})).then((function(e){x(!1),V.push("/thanks")})).catch((function(e){return console.log("error",e)})),(0,o.ZP)("reachGoal","ask_question"),s&&(_("step4"),(0,o.ZP)("reachGoal","step4")),(0,o.ZP)("reachGoal","send_form"),_("event","lead",{event_category:"event",event_label:"send_quiz_form"}),_("send_form")),e.abrupt("return");case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,l.useEffect)((function(){g&&y&&F&&/^(\+{0,})(\d{0,})([(]{1}\d{1,3}[)]{0,}){0,}(\s?\d+|\+\d{2,3}\s{1}\d+|\d+){1}[\s|-]?\d+([\s|-]?\d+){1,2}(\s){0,}$/gm.test(y)&&(null===y||void 0===y?void 0:y.length)>10&&(null===y||void 0===y?void 0:y.length)<14?E(!1):E(!0),document.querySelector('.checkbox-container input[type="checkbox"]').checked=!0,s?document.querySelectorAll('input[name="messenger__main-quiz"]').forEach((function(e){e.value===F&&(e.checked=!0)})):document.querySelectorAll('input[name="messenger__main"]').forEach((function(e){e.value===F&&(e.checked=!0)})),O(window),R(document)}),[B,K,g,y]),(0,h.jsxs)("section",{className:"".concat(c," form container"),children:[Z?(0,h.jsx)(h.Fragment,{children:s?(0,h.jsxs)("h2",{className:"form__title success__form",children:["\u041e\u0442\u043b\u0438\u0447\u043d\u043e! \u0412 \u0431\u043b\u0438\u0436\u0430\u0439\u0448\u0435\u0435 \u0432\u0440\u0435\u043c\u044f \u0441 \u0432\u0430\u043c\u0438 \u0441\u0432\u044f\u0436\u0435\u0442\u0441\u044f \u043d\u0430\u0448 \u043c\u0435\u043d\u0435\u0434\u0436\u0435\u0440, \u0437\u0430\u0434\u0430\u0441\u0442 \u0443\u0442\u043e\u0447\u043d\u044f\u044e\u0449\u0438\u0435 \u0432\u043e\u043f\u0440\u043e\u0441\u044b \u0438 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e \u043f\u043e\u043c\u043e\u0436\u0435\u0442 \u0441 \u0432\u044b\u0431\u043e\u0440\u043e\u043c.",(0,h.jsx)("br",{}),"\u0410 \u043f\u043e\u043a\u0430 \u043c\u043e\u0436\u0435\u0442\u0435 \u043f\u043e\u0434\u043f\u0438\u0441\u0430\u0442\u044c\u0441\u044f \u043d\u0430 \u043d\u0430\u0441 \u0432 \u0441\u043e\u0446\u0441\u0435\u0442\u044f\u0445:"]}):(0,h.jsx)(h.Fragment,{})}):(0,h.jsxs)("h2",{className:"form__title",children:[n," "]}),(0,h.jsx)("div",{className:"modal__form__wrp",children:Z?(0,h.jsx)("div",{className:"form__success",children:s?(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("div",{id:"vk_groups"}),(0,h.jsx)(u(),{id:"VKWidgets",children:VK.Widgets.Group("vk_groups",{mode:4,wide:1,height:400,color1:"FFFFFF",color2:"000000",color3:"5181B8"},213757297)})]}):(0,h.jsx)(h.Fragment,{})}):(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("input",{type:"text",className:"form__input",placeholder:"\u0418\u043c\u044f \u0424\u0430\u043c\u0438\u043b\u0438\u044f",value:g,onInput:function(e){return b(e.target.value)}}),(0,h.jsxs)("label",{htmlFor:"phoneInput",style:{width:"100%"},children:[(0,h.jsx)("span",{className:"visually-hidden",children:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d"}),(0,h.jsx)(d.ZP,{international:!0,countryCallingCodeEditable:!1,defaultCountry:"RU",value:y,onChange:N,countries:["RU","BY","KG","KZ"]})]}),(0,h.jsxs)("div",{className:"social",children:[(0,h.jsx)("h3",{children:"\u041a\u0430\u043a\u0438\u043c \u043c\u0435\u0441\u0435\u043d\u0434\u0436\u0435\u0440\u043e\u043c \u0432\u044b \u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0435\u0441\u044c?"}),s?(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)("label",{className:"radio-container",children:["Telegram",(0,h.jsx)("input",{type:"radio",value:"Telegram",name:"messenger__main-quiz",onInput:function(e){return C(e.target.value)}}),(0,h.jsx)("span",{className:"radio-checkmark"})]}),(0,h.jsxs)("label",{className:"radio-container",children:["WhatsApp",(0,h.jsx)("input",{type:"radio",value:"WhatsApp",name:"messenger__main-quiz",onInput:function(e){return C(e.target.value)}}),(0,h.jsx)("span",{className:"radio-checkmark"})]}),(0,h.jsxs)("label",{className:"radio-container",children:["Viber",(0,h.jsx)("input",{type:"radio",value:"Viber",name:"messenger__main-quiz",onInput:function(e){return C(e.target.value)}}),(0,h.jsx)("span",{className:"radio-checkmark"})]}),(0,h.jsxs)("label",{className:"radio-container",children:["\u041d\u0435 \u043f\u043e\u043b\u044c\u0437\u0443\u044e\u0441\u044c",(0,h.jsx)("input",{type:"radio",value:"\u041d\u0435 \u043f\u043e\u043b\u044c\u0437\u0443\u044e\u0441\u044c",name:"messenger__main-quiz",onInput:function(e){return C(e.target.value)}}),(0,h.jsx)("span",{className:"radio-checkmark"})]})]}):(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)("label",{className:"radio-container",children:["Telegram",(0,h.jsx)("input",{type:"radio",value:"Telegram",name:"messenger__main",onInput:function(e){return C(e.target.value)}}),(0,h.jsx)("span",{className:"radio-checkmark"})]}),(0,h.jsxs)("label",{className:"radio-container",children:["WhatsApp",(0,h.jsx)("input",{type:"radio",value:"WhatsApp",name:"messenger__main",onInput:function(e){return C(e.target.value)}}),(0,h.jsx)("span",{className:"radio-checkmark"})]}),(0,h.jsxs)("label",{className:"radio-container",children:["Viber",(0,h.jsx)("input",{type:"radio",value:"Viber",name:"messenger__main",onInput:function(e){return C(e.target.value)}}),(0,h.jsx)("span",{className:"radio-checkmark"})]}),(0,h.jsxs)("label",{className:"radio-container",children:["\u041d\u0435 \u043f\u043e\u043b\u044c\u0437\u0443\u044e\u0441\u044c",(0,h.jsx)("input",{type:"radio",value:"\u041d\u0435 \u043f\u043e\u043b\u044c\u0437\u0443\u044e\u0441\u044c",name:"messenger__main",onInput:function(e){return C(e.target.value)}}),(0,h.jsx)("span",{className:"radio-checkmark"})]})]})]}),(0,h.jsxs)("label",{className:"checkbox-container",children:[(0,h.jsx)("input",{type:"checkbox"}),(0,h.jsx)("span",{className:"checkmark"}),"\u042f \u0441\u043e\u0433\u043b\u0430\u0441\u0435\u043d \u043d\u0430 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0443 \u043c\u043e\u0438\u0445",(0,h.jsx)("a",{target:"_blank",rel:"noreferrer",href:"/politika_obrabotki_personalnyh_dannyh_16_10_2021.pdf",children:" \u043f\u0435\u0440\u0441\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0445 \u0434\u0430\u043d\u043d\u044b\u0445"})]}),(0,h.jsx)("button",{className:"form__btn",onClick:function(){var e,n;(document.querySelector(".form__input").style.borderColor="#583E90",document.querySelector(".PhoneInputInput").style.borderColor="#583E90",P)?(document.querySelector(".form__input").value?document.querySelector(".PhoneInputInput").style.borderColor="red":document.querySelector(".form__input").style.borderColor="red",((null===(e=document.querySelector(".PhoneInputInput").value.split(" ").join(""))||void 0===e?void 0:e.length)<11||(null===(n=document.querySelector(".PhoneInputInput").value.split(" ").join(""))||void 0===n?void 0:n.length)>13)&&(document.querySelector(".PhoneInputInput").style.borderColor="red")):D()},children:v?(0,h.jsxs)("div",{className:"lds-ellipsis",children:[(0,h.jsx)("div",{}),(0,h.jsx)("div",{}),(0,h.jsx)("div",{}),(0,h.jsx)("div",{})]}):(0,h.jsx)(h.Fragment,{children:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c"})})]})})]})}},4298:function(e,n,a){e.exports=a(97829)}}]);